[‚úî]: assets/images/checkbox-small-blue.png

# Melhores Pr√°ticas em Node.js

<h1 align="center">
  <img src="assets/images/banner-2.jpg" alt="Node.js Best Practices">
</h1>

<br/>

<div align="center">
  <img src="https://img.shields.io/badge/‚öô%20Item%20count%20-%2073%20Best%20practices-blue.svg" alt="73 items"> <img src="https://img.shields.io/badge/%F0%9F%93%85%20Last%20update%20-%20July%2015%202018-green.svg" alt="Last update: July 25th, 2018"> <img src="https://img.shields.io/badge/%E2%9C%94%20Updated%20For%20Version%20-%20Node%208.11.3%20LTS-brightgreen.svg" alt="Updated for Node 8.11.3 LTS">
</div>

<br/>

[![nodepractices](/assets/images/twitter-s.png)](https://twitter.com/nodepractices/) **Follow us on Twitter!** [**@nodepractices**](https://twitter.com/nodepractices/)

<br/>

Leia em diferentes linguagens: [![CN](/assets/flags/CN.png)**CN**](/README.chinese.md) [(![ES](/assets/flags/ES.png)**ES**, ![FR](/assets/flags/FR.png)**FR**, ![HE](/assets/flags/HE.png)**HE**, ![KR](/assets/flags/KR.png)**KR**, ![RU](/assets/flags/RU.png)**RU** and ![TR](/assets/flags/TR.png)**TR** in progress!)](#translations)

<br/>

# Bem-vindo! 3 Coisas Que Voc√™ Precisa de Saber:

**1. Quando voc√™ l√™ aqui, na verdade voc√™ l√™ alguns dos melhores artigos de Node.js -** este √© um resumo e curadoria dos mais bem ranqueados conte√∫dos sobre as melhores pr√°ticas do Node.js.

**2. Esta √© a maior colet√¢nea, e est√° crescendo mais a cada semana -** atualmente, s√£o apresentadas mais de 50 melhores pr√°ticas, guias de estilo e dicas de arquitetura. Novas issues e PR s√£o criadas diariamente para manter este livro vivo atualizado. Gostar√≠amos muito de ver voc√™ contribuindo aqui, seja corrigindo algum erro de c√≥digo ou sugerindo novas e brilhantes ideias. Veja nossas [conquistas aqui](https://github.com/i0natan/nodebestpractices/milestones?direction=asc&sort=due_date&state=open).

**3. A maioria dos t√≥picos possuem informa√ß√µes adicionais -** perto dos t√≥picos das melhores pr√°ticas, voc√™ encontrar√° o link **üîóLeia Mais** que ir√° apresentar exemplos de c√≥digos, cita√ß√µes de blogs selecionados e mais informa√ß√µes.

<br/><br/><br/>

## √çndice

1.  [Pr√°ticas de Estrutura de Projeto (5)](#1-project-structure-practices)
2.  [Pr√°ticas de Tratamento de Erros (11) ](#2-error-handling-practices)
3.  [Pr√°ticas de Estilo de C√≥digo (12) ](#3-code-style-practices)
4.  [Pr√°ticas de Testes e Qualidade Geral (8) ](#4-testing-and-overall-quality-practices)
5.  [Pr√°ticas de Produ√ß√£o (17) ](#5-going-to-production-practices)
6.  :star: Novo: [Pr√°ticas de Seguran√ßa (23)](#6-security-best-practices)
7.  Pr√°ticas de Performance ([em breve](https://github.com/i0natan/nodebestpractices/milestones?direction=asc&sort=due_date&state=open))

<br/><br/><br/>

# `1. Pr√°ticas de Estrutura de Projeto`

## ![‚úî] 1.1 Estruture sua solu√ß√£o por componentes

**TL;DR:** A pior armadilha das grandes aplica√ß√µes √© manter uma enorme base de c√≥digo com centenas de depend√™ncias - tal qual as monol√≠ticas, que diminuem a velocidade dos desenvolvedores conforme eles tentam incorporar novos recursos. Em vez disso, particione seu c√≥digo em componentes, cada um com sua pr√≥pria pasta ou uma base de c√≥digo dedicada, e garanta cada unidade seja mantida pequena e simples. Veja o link ‚ÄòLeia Mais‚Äô abaixo, para ver exemplos de estrutura correta de projeto.

**Caso contr√°rio:** Quando desenvolvendo novos recursos, desenvolvedores t√™m dificuldade para perceber o impacto de suas modifica√ß√µes e temem estragar outros componentes dependentes - deploys se tornam mais lentos e arriscados. Tamb√©m √© considerado mais dif√≠cil de escalar quando nenhuma unidade de neg√≥cio est√° separada.

üîó [**Leia mais: estruture por componentes**](/sections/projectstructre/breakintcomponents.md)

<br/><br/>

## ![‚úî] 1.2 Coloque seus Componentes em Camadas, mantenha o Express dentro de seus limites

**TL;DR:** Cada componente deve conter 'layers' (camadas) - um objeto dedicado para web, l√≥gica e c√≥digo de acesso a dados. Isso n√£o apenas faz uma separa√ß√£o clara dos interesses, como tamb√©m facilita significativamente os mocks e testes de sistema. Embora este seja um padr√£o muito comum, desenvolvedores de API tendem a misturar camadas, passando os objetos da camada Web (req e res do Express) para a l√≥gica de neg√≥cios e camadas de dados - isto torna sua aplica√ß√£o dependente a acess√≠vel apenas pelo Express.

**Caso contr√°rio:** App that mixes web objects with other layers can not be accessed by testing code, CRON jobs and other non-Express callers

üîó [**Leia Mais: seu app em camadas**](/sections/projectstructre/createlayers.md)

<br/><br/>

## ![‚úî] 1.3 Envolva os utilit√°rios comuns como pacotes npm

**TL;DR:** Em uma grande aplica√ß√£o, que constitui uma grande base de c√≥digo, utilidades de caracter√≠sticas transversais tais como logger, encripta√ß√£o e afins, devem ser envolvidos pelo seu pr√≥prio c√≥digo e exposto como pacotes npm privados. Isso permite compartilh√°-los entre v√°rias bases de c√≥digo e projetos.

**Caso contr√°rio:** Voc√™ dever√° criar seu pr√≥prio ciclo de implanta√ß√£o e depend√™ncia.

üîó [**Leia Mais: estrutura por caracter√≠stica**](/sections/projectstructre/wraputilities.md)

<br/><br/>

## ![‚úî] 1.4 Separe 'app' e 'server' no Express

**TL;DR:** Evite o p√©ssimo h√°bito de definir todo a aplica√ß√£o [Express](https://expressjs.com/) em um √∫nico arquivo enorme - separe a defini√ß√£o de seu 'Express' no m√≠nimo em dois arquivos: a declara√ß√£o da API (app.js) e as configura√ß√µes de rede (WWW). Para uma estrutura ainda melhor, declare sua API dentro dos componentes.

**Caso contr√°rio:** Sua API ser√° acess√≠vel apenas para testes via chamadas HTTP (mais lentos e muito mais dif√≠ceis de gerar relat√≥rios de cobertura). Provavelmente n√£o ser√° um grande prazer manter centenas de linhas de c√≥digo em um √∫nico arquivo.

üîó [**Leia Mais: separe 'app' e 'server' no Express**](/sections/projectstructre/separateexpress.md)

<br/><br/>

## ![‚úî] 1.5 Use configura√ß√£o consciente, segura e hier√°rquica do ambiente

**TL;DR:** Uma defini√ß√£o de configura√ß√£o perfeita e impec√°vel deve garantir que (a) as chaves possam ser lidas a partir do arquivo E TAMB√âM da vari√°vel de ambiente (b) os segredos sejam mantidos fora do c√≥digo consolidado (c) a configura√ß√£o √© hier√°rquica para facilitar a localiza√ß√£o. Existem alguns pacotes que podem auxiliar na checagem destes t√≥picos, como [rc](https://www.npmjs.com/package/rc), [nconf](https://www.npmjs.com/package/nconf) e [config](https://www.npmjs.com/package/config)

**Caso contr√°rio:** Deixar de satisfazer qualquer um dos requisitos de configura√ß√£o simplesmente atrapalhar√° a equipe de desenvolvimento ou devops. Provavelmente ambas.

üîó [**Leia Mais: melhores pr√°ticas de configura√ß√£o**](/sections/projectstructre/configguide.md)

<br/><br/><br/>

<p align="right"><a href="#table-of-contents">‚¨Ü Voltar ao topo</a></p>

# `2. Pr√°ticas de Tratamento de Erros`

## ![‚úî] 2.1 Utilize Async-Await ou promises para tratamento de erros ass√≠ncronos

**TL;DR:** Tratar erros ass√≠ncronos no estilo callback provavelmente √© o caminho mais r√°pido para o inferno (tamb√©m conhecido como a pyramid of doom - ou pir√¢mide da desgra√ßa em bom portugu√™s). O melhor presente que voc√™ pode dar ao seu c√≥digo √© utilizar uma biblioteca respeit√°vel de promise ou async-await, que proporciona uma sintaxe de c√≥digo muito mais compacta e familiar, como o try-catch.

**Caso contr√°rio:** O estilo de callback do Node.js, function(err, response), √© um caminho promissor para um c√≥digo insustent√°vel devido √† combina√ß√£o de manipula√ß√£o de erro com c√≥digo casual, aninhamento excessivo e padr√µes de codifica√ß√£o inadequados.

üîó [**Leia Mais: evitando callbacks**](/sections/errorhandling/asyncerrorhandling.md)

<br/><br/>

## ![‚úî] 2.2 Utilize apenas objetos de erro interno

**TL;DR:** Muitos geram erros como uma string ou como algum tipo personalizado - isso complica a l√≥gica de tratamento de erros e a interoperabilidade entre m√≥dulos. Se voc√™ rejeita uma promise, lance uma mensagem de erro ou uma exce√ß√£o - utilizando somente o objeto de erro interno aumentar√° a uniformidade e evitar√° a perda de informa√ß√µes.

**Caso contr√°rio:** Ao invocar algum componente, sendo incerto qual tipo de erro ir√° retornar - isso faz com que o tratamento de erros seja muito mais dif√≠cil. At√© pior, usar tipos personalizados para descrever erros pode levar √† perda de informa√ß√µes de erros cr√≠ticos, como o stack trace!

üîó [**Leia Mais: usando o objeto interno de erro**](/sections/errorhandling/useonlythebuiltinerror.md)

<br/><br/>

## ![‚úî] 2.3 Diferencie erros operacionais vs erros de programa√ß√£o

**TL;DR:** Erros operacionais (ex: API recebeu um input inv√°lido) referem-se a casos onde o impacto do erro √© totalmente compreendido e pode ser tratado com cuidado. Por outro lado, erro de programa√ß√£o (ex: tentar ler uma vari√°vel n√£o definida) refere-se a falhas de c√≥digo desconhecidas que ditam para reiniciar a aplica√ß√£o.

**Caso contr√°rio:** Voc√™ pode sempre reiniciar o aplicativo quando um erro aparecer, mas por que derrubar aproximadamente 5000 usu√°rios que estavam online por causa de um pequeno erro operacional previsto? O contr√°rio tamb√©m n√£o √© ideal - manter a aplica√ß√£o rodando quando um problema desconhecido (erro de programa√ß√£o) ocorreu, pode levar para um comportamento n√£o esperado. Diferenci√°-los, permite agir com tato e aplicar uma abordagem equilibrada baseada no dado contexto.

üîó [**Leia Mais: erros operacionais vs erros de programa√ß√£o**](/sections/errorhandling/operationalvsprogrammererror.md)

<br/><br/>

## ![‚úî] 2.4 Trate erros de forma centralizada, n√£o dentro de um middleware do Express

**TL;DR:** A l√≥gica de tratamento de erros, bem como email para administrador e loggin, deve ser encapsulada em um objeto dedicado e centralizado que todos os endpoints (por exemplo, middleware do Express, cron jobs, testes unit√°rios) chamem quando um erro √© recebido.

**Caso contr√°rio:** N√£o tratar os erros em um mesmo lugar ir√° levar √† duplicidade de c√≥digo, e provavelmente, a erros tratados incorretamente.

üîó [**Leia Mais: tratando erros de forma centralizada**](/sections/errorhandling/centralizedhandling.md)

<br/><br/>

## ![‚úî] 2.5 Documente erros de API usando o Swagger

**TL;DR:** Permita que os clientes de sua API saibam quais erros podem ser retornados para que eles possam lidar com esses detalhes, sem causar falhas. Geralmente, isto √© feito com frameworks de documenta√ß√£o REST API, como o Swagger.

**Caso contr√°rio:** Um cliente de uma API pode decidir travar e reiniciar, apenas pelo motivo de ter recebido de volta um erro que n√£o conseguiu entender. Nota: o visitante de sua API pode ser voc√™ (muito comum em um ambiente de microsservi√ßo).

üîó [**Leia Mais: documentando erros no Swagger**](/sections/errorhandling/documentingusingswagger.md)

<br/><br/>

## ![‚úî] 2.6 Finalize o processo quando um estranho chegar

**TL;DR:** Quando ocorre um erro desconhecido (um erro de programa√ß√£o, veja a melhor pr√°tica #3) - h√° incerteza sobre a integridade da aplica√ß√£o. Uma pr√°tica comum sugere reiniciar cuidadosamente o processo utilizando uma ferramenta de ‚Äúreinicializa√ß√£o‚Äù como Forever e PM2.

**Caso contr√°rio:** Quando uma exce√ß√£o desconhecida √© lan√ßada, algum objeto pode estar com defeito (por exemplo, um emissor de evento que √© usado globalmente e n√£o dispara mais eventos devido a alguma falha interna) e todas as requisi√ß√µes futuras podem falhar ou se comportar loucamente.

üîó [**Leia Mais: finalizando o processo**](/sections/errorhandling/shuttingtheprocess.md)

<br/><br/>

## ![‚úî] 2.7 Use um agente de log maduro para aumentar a visibilidade de erros

**TL;DR:** Um conjunto de ferramentas de registro maduras como Winston, Bunyan ou Log4j, ir√£o acelerar a descoberta e entendimento de erros. Portanto, esque√ßa o console.log.

**Caso contr√°rio:** Ficar procurando atrav√©s de console.logs ou manualmente em arquivos de texto confusos sem utilizar ferramentas de consulta ou um visualizador de log decente, pode mant√™-lo ocupado at√© tarde.

üîó [**Leia Mais: usando um logger maduro**](/sections/errorhandling/usematurelogger.md)

<br/><br/>

## ![‚úî] 2.8 Fluxos de testes de erros usando seu framework favorito

**TL;DR:** Se o analista de QA ou o desenvolvedor de testes - Certifique-se de que seu c√≥digo n√£o atenda apenas o cen√°rio positivo, mas tamb√©m trate e retorne os erros corretos. Frameworks de teste como Mocha e Chai podem lidar com isso facilmente (veja exemplos de c√≥digos no ‚ÄúGist popup‚Äù)

**Caso contr√°rio:** Sem testes, seja autom√°tico ou manual, n√£o podemos confiar em nosso c√≥digo para retornar os erros certos. Sem erros significantes, n√£o h√° tratamento de erros.

üîó [**Leia Mais: fluxos de testes de erros**](/sections/errorhandling/testingerrorflows.md)

<br/><br/>

## ![‚úî] 2.9 Descubra erros e downtime usando APM

**TL;DR:** Produtos de monitoramento e desempenho (tamb√©m conhecido como APM), avaliam sua base de c√≥digo ou API de forma proativa, para que possam destacar automaticamente erros, falhas e lentid√µes n√£o percebidos.

**Caso contr√°rio:** Voc√™ pode gastar muito esfor√ßo medindo o desempenho e os tempos de inatividade (downtime) da API. Provavelmente, voc√™ nunca saber√° quais s√£o suas partes de c√≥digo mais lentas no cen√°rio real e como elas afetam o UX.

üîó [**Leia Mais: usando APM**](/sections/errorhandling/apmproducts.md)

<br/><br/>

## ![‚úî] 2.10 Capture rejei√ß√µes de promises n√£o tratadas

**TL;DR:** Qualquer exce√ß√£o lan√ßada dentro de uma promise ser√° descartada, a menos que o desenvolvedor n√£o se esque√ßa de trat√°-la explicitamente. Mesmo que seu c√≥digo esteja inscrito no process.uncaughtException! Supere isso, registrando no evento process.unhandledRejection.

**Caso contr√°rio:** Seus erros ser√£o engolidos e n√£o v√£o deixar rastros. Nada para se preocupar.

üîó [**Leia Mais: capturando rejei√ß√µes de promises n√£o tratadas**](/sections/errorhandling/catchunhandledpromiserejection.md)

<br/><br/>

## ![‚úî] 2.11 Falhe r√°pido, valide argumentos usando uma biblioteca dedicada

**TL;DR:** Isto deveria fazer parte das melhores pr√°ticas de Express - Confirme a entrada da API para evitar erros desagrad√°veis ‚Äã‚Äãque s√£o muito mais dif√≠ceis de acompanhar mais tarde. A valida√ß√£o de c√≥digo geralmente √© entediante ao menos que voc√™ esteja utilizando uma biblioteca de ajuda bem legal, como a Joi.

**Caso contr√°rio:** Considere isto: sua fun√ß√£o espera receber um ‚ÄúDesconto‚Äù como argumento num√©rico que foi esquecido de passar. Mais adiante, seu c√≥digo verifica se Desconto!=0 (valor do desconto permitido √© maior que zero). Depois, ir√° permitir que o usu√°rio desfrute de um desconto. Meu Deus, que baita bug. Entendeu?

üîó [**Leia Mais: falhando r√°pido**](/sections/errorhandling/failfast.md)

<br/><br/><br/>

<p align="right"><a href="#table-of-contents">‚¨Ü Voltar ao topo</a></p>

# `3. Pr√°ticas de Estilo de C√≥digo`

## ![‚úî] 3.1 Use ESLint

**TL;DR:** O [ESLint](https://eslint.org) √© de fato o padr√£o para verificar poss√≠veis erros e consertar o estilo de c√≥digo, n√£o apenas para identificar problemas b√°sicos de espa√ßamento, mas tamb√©m para detectar antipadr√µes de c√≥digo, como desenvolvedores lan√ßando erros sem classifica√ß√£o. Embora o ESLint possa corrigir automaticamente estilos de c√≥digo, outra ferramentas como o [prettier](https://www.npmjs.com/package/prettier) e o [beautify](https://www.npmjs.com/package/js-beautify) s√£o mais poderosos no quesito corre√ß√£o de formata√ß√£o e trabalham em conjunto com o ESLint.

**Caso contr√°rio:** Desenvolvedores ir√£o focar nas preocupa√ß√µes tediosas de espa√ßamento e largura de linha e o tempo poder√° ser desperdi√ßado pensando sobre o estilo de c√≥digo do projeto.

<br/><br/>

## ![‚úî] 3.2 Plugins Espec√≠ficos do Node.js

**TL;DR:** Al√©m das regras padr√µes do ESLint que cobrem somente o Vanilla JS, adicione plug-ins espec√≠ficos do Node, como o [eslint-plugin-node](https://www.npmjs.com/package/eslint-plugin-node), o [eslint-plugin-mocha](https://www.npmjs.com/package/eslint-plugin-mocha) e o [eslint-plugin-node-security](https://www.npmjs.com/package/eslint-plugin-security)

**Caso contr√°rio:** Muitos padr√µes de c√≥digo do Node.js com falha podem escapar do radar. Por exemplo, desenvolvedores podem chamar arquivos fazendo o require(variavelComoCaminho) com uma determinada vari√°vel como caminho, o que permite que invasores executem qualquer script JS. Os linters do Node.js podem detectar tais padr√µes e reclamar cedo.

<br/><br/>

## ![‚úî] 3.3 Comece um Bloco de C√≥digo com Chaves na Mesma Linha

**TL;DR:** As chaves que abrem um bloco de c√≥digo devem estar na mesma linha da instru√ß√£o de abertura

### Exemplo de C√≥digo

```javascript
// Do
function someFunction() {
  // code block
}

// Avoid
function someFunction() {
  // code block
}
```

**Caso contr√°rio:** Evitar esta recomenda√ß√£o pode levar a resultados inesperados, como visto nesta thread do StackOverflow:

üîó [**Read more:** "Por que os resultados variam com base no posicionamento da chave?" (Stackoverflow)](https://stackoverflow.com/questions/3641519/why-does-a-results-vary-based-on-curly-brace-placement)

<br/><br/>

## ![‚úî] 3.4 N√£o Esque√ßa do Ponto e V√≠rgula

**TL;DR:** Embora n√£o seja unanimidade, ainda √© recomendado colocar ponto e v√≠rgula no fim de cada declara√ß√£o. Isto far√° que seu c√≥digo seja mais leg√≠vel e expl√≠cito para outros desenvolvedores.

**Caso contr√°rio:** Como visto em se√ß√µes anteriores, interpretadores do JavaScript adicionam ponto e v√≠rgula automaticamente no final das declara√ß√µes caso n√£o exista, o que pode levar a resultados n√£o desejados.

<br/><br/>

## ![‚úî] 3.5 Nomeie Suas Fun√ß√µes

**TL;DR:** Nomeie todas as fun√ß√µes, incluindo closures e callbacks. Evite fun√ß√µes an√¥nimas. Isso √© especialmente √∫til em uma aplica√ß√£o node. Nomear todas a fun√ß√µes permitir√° que voc√™ entenda facilmente o que est√° olhando quando verificar um snapshot da mem√≥ria.

**Caso contr√°rio:** A depura√ß√£o de problemas de produ√ß√£o usando um dump principal (snapshot da mem√≥ria) pode se tornar um desafio quando voc√™ percebe um consumo significativo de mem√≥ria de fun√ß√µes an√¥nimas.

<br/><br/>

## ![‚úî] 3.6 Conven√ß√µes de nomenclatura para vari√°veis, constantes, fun√ß√µes e classes

**TL;DR:** Utilize **_lowerCamelCase_** quando nomeando constantes, vari√°veis e fun√ß√µes, e **_UpperCamelCase_** (primeira letra mai√∫scula tamb√©m) quando nomeando classes. Isso ir√° lhe ajudar a distinguir facilmente entre vari√°veis/fun√ß√µes, e classes que necessitam de instancia√ß√£o. Use nomes descritivos, mas tente mant√™-los curtos.

**Caso contr√°rio:** O JavaScript √© a √∫nica linguagem no mundo que permite invocar um construtor (‚ÄúClass‚Äù) diretamente sem instanci√°-lo primeiro. Consequentemente, Classes e construtores de fun√ß√µes s√£o diferenciados come√ßando com UpperCamelCase

### Exemplo de C√≥digo

```javascript
// for class name we use UpperCamelCase
class SomeClassExample {}

// for const names we use the const keyword and lowerCamelCase
const config = {
  key: 'value'
};

// for variables and functions names we use lowerCamelCase
let someVariableExample = 'value';
function doSomething() {}
```

<br/><br/>

## ![‚úî] 3.7 Prefira const do que let. Esque√ßa do var

**TL;DR:** Usar `const` significa que uma vez que a vari√°vel foi atribu√≠da, ela n√£o pode ser reatribu√≠da. Preferir const ir√° te ajudar a n√£o cair na tenta√ß√£o de utilizar a mesma vari√°vel para diferentes usos, e ir√° deixar seu c√≥digo mais limpo. Se uma vari√°vel precisa ser reatribu√≠da, em um for loop, por exemplo, use `let` para declarar. Outro aspecto importante do `let` √© que esta vari√°vel s√≥ estar√° dispon√≠vel no escopo de c√≥digo em que ela foi definida. `var` tem escopo de fun√ß√£o, n√£o de bloco, e [n√£o deveria ser utilizada em ES6](https://hackernoon.com/why-you-shouldnt-use-var-anymore-f109a58b9b70)
, agora que voc√™ tem const e let ao seu dispor.

**Caso contr√°rio:** A depura√ß√£o se torna muito mais complicada ao seguir uma vari√°vel que frequentemente muda

üîó [**Read more: JavaScript ES6+: var, let ou const?** ](https://medium.com/javascript-scene/javascript-es6-var-let-or-const-ba58b8dcde75)

<br/><br/>

## ![‚úî] 3.8 Requires vem primeiro e n√£o dentro de fun√ß√µes

**TL;DR:** Fa√ßa o require de m√≥dulos no in√≠cio de cada arquivo, antes e fora de qualquer fun√ß√£o. Esta simples pr√°tica ir√° te ajudar n√£o apenas a reconhecer as depend√™ncias de um determinado arquivo com facilidade e rapidez, como tamb√©m evitar√° alguns poss√≠veis problemas.

**Caso contr√°rio:** Os requires rodam de forma s√≠ncrona pelo Node.js. Se eles forem chamados de dentro de uma fun√ß√£o, isso pode impedir que outras solicita√ß√µes sejam tratadas em um momento mais cr√≠tico. Al√©m disso, se um m√≥dulo necess√°rio ou qualquer uma de suas depend√™ncias lan√ßar um erro e travar o servidor, √© melhor descobrir isso o mais r√°pido poss√≠vel, o que pode n√£o ser o caso se este m√≥dulo tiver sido declarado dentro de uma fun√ß√£o.

<br/><br/>

## ![‚úî] 3.9 Fa√ßa Require nas pastas, n√£o diretamente nos arquivos

**TL;DR:** Ao desenvolver um m√≥dulo/biblioteca em uma pasta, coloque um arquivo index.js que exponha os componentes internos do m√≥dulo para que cada consumidor passe por ele. Isso serve como uma 'interface' para seu m√≥dulo e facilita futuras mudan√ßas sem causar perdas.

**Caso contr√°rio:** Alterar a estrutura interna dos arquivos ou a assinatura pode quebrar a interface com clientes.

### Exemplo de C√≥digo

```javascript
// Do
module.exports.SMSProvider = require('./SMSProvider');
module.exports.SMSNumberResolver = require('./SMSNumberResolver');

// Avoid
module.exports.SMSProvider = require('./SMSProvider/SMSProvider.js');
module.exports.SMSNumberResolver = require('./SMSNumberResolver/SMSNumberResolver.js');
```

<br/><br/>

## ![‚úî] 3.10 Use 0 operador `===`

**TL;DR:** D√™ prefer√™ncia em usar o operador de compara√ß√£o estrita `===` ao inv√©s do operador de compara√ß√£o abstrata `==`, que √© mais fraco. `==` ir√° comparar duas vari√°veis depois de convert√™-las para o mesmo tipo. N√£o h√° convers√£o de tipo no `===` e ambas as vari√°veis devem ser do mesmo tipo para serem iguais.

**Caso contr√°rio:** Vari√°veis diferentes podem retornar verdadeiro quando comparadas usando o operador `==`.

### Exemplo de C√≥digo

```javascript
'' == '0'; // false
0 == ''; // true
0 == '0'; // true

false == 'false'; // false
false == '0'; // true

false == undefined; // false
false == null; // false
null == undefined; // true

' \t\r\n ' == 0; // true
```

Todas as declara√ß√µes acima false se feitas com `===`.

<br/><br/>

## ![‚úî] 3.11 Use Async Await, evite callbacks

**TL;DR:** Agora o Node 8 LTS possui suporte completo para Async-await. Esta √© uma nova maneira de lidar com c√≥digos ass√≠ncronos que substitui callbacks e promises. Async-await √© n√£o-bloqueante, e isso faz com que os c√≥digos ass√≠ncronos pare√ßam s√≠ncronos. O melhor presente que voc√™ pode dar ao seu c√≥digo √© usar async-await, que fornece uma sintaxe de c√≥digo muito mais compacta e familiar como o try-catch.

**Caso contr√°rio:** Lidar com erros ass√≠ncronos no estilo de callback √© provavelmente o caminho mais r√°pido para o inferno - esse estilo for√ßa verificar todos os erros, lidar com desajeitados aninhamentos de c√≥digo e torna dif√≠cil raciocinar sobre o fluxo de c√≥digo.

üîó[**Leia mais:** Guia do async await 1.0](https://github.com/yortus/asyncawait)

<br/><br/>

## ![‚úî] 3.12 Use Fat (=>) Arrow Functions

**TL;DR:** Embora seja recomendado usar acync-await e evitar par√¢metros de fun√ß√£o ao lidar com APIs antigas, que aceitam promises ou callbacks - arrow functions tornam a estrutura do c√≥digo mais compacta e mant√©m o contexto l√©xico da fun√ß√£o raiz (por exemplo, 'this').

**Caso contr√°rio:** C√≥digos mais longos (em fun√ß√µes ES5) s√£o mais propensos a erros e s√£o mais dif√≠ceis de ler.

üîó [**Read mode: Arrow Functions - √© hora de abra√ßar a causa**](https://medium.com/javascript-scene/familiarity-bias-is-holding-you-back-its-time-to-embrace-arrow-functions-3d37e1a9bb75)

<br/><br/><br/>

<p align="right"><a href="#table-of-contents">‚¨Ü Voltar ao topo</a></p>

# `Pr√°ticas de API`

## Nossos colaboradores est√£o trabalhando nesta se√ß√£o. Quer se juntar a n√≥s?

# `Pr√°ticas de Performance`

## Nossos colaboradores est√£o trabalhando nesta se√ß√£o. Quer se juntar a n√≥s?

<br/><br/><br/>

# Feitos

Para manter este guia e deix√°-lo atualizado, estamos constantemente atualizando e aprimorando as diretrizes e as pr√°ticas recomendadas com a ajuda da comunidade. Voc√™ pode acompanhar nossos [feitos](https://github.com/i0natan/nodebestpractices/milestones) e se juntar aos grupos de trabalho, caso queira contribuir com este projeto.

<br/><br/>

## Tradu√ß√µes

Todas as tradu√ß√µes s√£o contribui√ß√µes da comunidade. N√≥s ficaremos felizes em obter ajuda com tradu√ß√µes conclu√≠das, em andamento, ou mesmo com novas tradu√ß√µes!

### Tradu√ß√µes conclu√≠das

- ![CN](/assets/flags/CN.png) [Chin√™s](README.chinese.md) - Cortesia de [Matt Jin](https://github.com/mattjin)

### Tradu√ß√µes em andamento

- ![FR](/assets/flags/FR.png) [Franc√™s](https://github.com/gaspaonrocks/nodebestpractices/blob/french-translation/README.french.md) ([Discuss√£o](https://github.com/i0natan/nodebestpractices/issues/129))
- ![HE](/assets/flags/HE.png) Hebraico ([Discuss√£o](https://github.com/i0natan/nodebestpractices/issues/156))
- ![KR](/assets/flags/KR.png) [Coreano](https://github.com/i0natan/nodebestpractices/blob/korean-translation/README.md) ([Discuss√£o](https://github.com/i0natan/nodebestpractices/issues/94))
- ![RU](/assets/flags/RU.png) [Russo](https://github.com/i0natan/nodebestpractices/blob/russian-translation/README.russian.md) ([Discuss√£o](https://github.com/i0natan/nodebestpractices/issues/105))
- ![ES](/assets/flags/ES.png) [Espanhol](https://github.com/i0natan/nodebestpractices/blob/spanish-translation/README.spanish.md) ([Discuss√£o](https://github.com/i0natan/nodebestpractices/issues/95))
- ![TR](/assets/flags/TR.png) Turco ([Discuss√£o](https://github.com/i0natan/nodebestpractices/issues/139))

<br/><br/><br/>

# Colaboradores

## `Yoni Goldberg`

Consultor de Node.js independente, que trabalha com clientes nos EUA, Europa e Israel, na cria√ß√£o de aplica√ß√µes Node dimension√°veis em grande escala. Muitas das melhores pr√°ticas acima foram publicadas primeiro em um post em seu blog em [goldbergyoni.com](https://goldbergyoni.com). Encontre-o como @goldbergyoni ou me@goldbergyoni.com

## `Ido Richter`

üë®‚Äçüíª Engenheiro de software, üåê web developer, ü§ñ entusiasta de emojis

## `Refael Ackermann` [@refack](https://github.com/refack) &lt;refack@gmail.com&gt; (he/him)

Colaborador do Core do Node.js Core, vem "nodeando" desde a vers√£o 0.4 e "nodeou" em v√°rios sites em produ√ß√£o. Fundou o reposit√≥rio `node4good`, dos projetos [`lodash-contrib`](https://github.com/node4good/lodash-contrib), [`formage`](https://github.com/node4good/formage), e [`asynctrace`](https://github.com/node4good/asynctrace). Tamb√©m o `refack` no freenode, Twitter, GitHub, GMail e muitas outras plataformas. Aberto √† mensagens inbox, feliz em ajudar.

## `Bruno Scheufler`

üíª full-stack web developer e entusiasta de Node.js

## `Kyle Martin` [@js-kyle](https://github.com/js-kyle)

Full Stack Developer da Nova Zel√¢ndia, interessado em arquitetar e desenvolver aplica√ß√µes Node.js para rodar em escala global. Um grande contribuidor para software de c√≥digo aberto, incluindo o Core do Node.js

<br/><br/><br/>

# Notas de Agradecimento

Este reposit√≥rio √© mantido atualizado gra√ßas √† ajuda da comunidade. N√≥s apreciamos qualquer contribui√ß√£o, desde a corre√ß√£o de uma simples palavra at√© uma nova melhor pr√°tica. Abaixo, a lista de todos que contribu√≠ram para este projeto. Uma üåª simboliza um pull request bem sucedido e uma ‚≠ê simboliza uma nova melhor pr√°tica aprovada.

### Flores

üåª [Kevin Rambaud](https://github.com/kevinrambaud),
üåª [Michael Fine](https://github.com/mfine15),
üåª [Shreya Dahal](https://github.com/squgeim),
üåª [ChangJoo Park](https://github.com/ChangJoo-Park),
üåª [Matheus Cruz Rocha](https://github.com/matheusrocha89),
üåª [Yog Mehta](https://github.com/BitYog),
üåª [Kudakwashe Paradzayi](https://github.com/kudapara),
üåª [t1st3](https://github.com/t1st3),
üåª [mulijordan1976](https://github.com/mulijordan1976),
üåª [Matan Kushner](https://github.com/matchai),
üåª [Fabio Hiroki](https://github.com/fabiothiroki),
üåª [James Sumners](https://github.com/jsumners),
üåª [Chandan Rai](https://github.com/crowchirp),
üåª [Dan Gamble](https://github.com/dan-gamble),
üåª [PJ Trainor](https://github.com/trainorpj),
üåª [Remek Ambroziak](https://github.com/reod),
üåª [Yoni Jah](https://github.com/yonjah),
üåª [Misha Khokhlov](https://github.com/hazolsky),
üåª [Evgeny Orekhov](https://github.com/EvgenyOrekhov),
üåª [Gediminas Petrikas](https://github.com/gediminasml),
üåª [Isaac Halvorson](https://github.com/hisaac),
üåª [Vedran Karaƒçiƒá](https://github.com/vkaracic),
üåª [lallenlowe](https://github.com/lallenlowe),
üåª [Nathan Wells](https://github.com/nwwells),
üåª [Paulo V√≠tor S Reis](https://github.com/paulovitin),
üåª [syzer](https://github.com/syzer),
üåª [David Sancho](https://github.com/davesnx),
üåª [Robert Manolea](https://github.com/pupix),
üåª [Xavier Ho](https://github.com/spaxe),
üåª [Aaron Arney](https://github.com/ocularrhythm),
üåª [Jan Charles Maghirang Adona](https://github.com/septa97),
üåª [Allen Fang](https://github.com/AllenFang),
üåª [Leonardo Villela](https://github.com/leonardovillela),
üåª [Michal Zalecki](https://github.com/MichalZalecki)
üåª [Chris Nicola](https://github.com/chrisnicola),
üåª [Alejandro Corredor](https://github.com/aecorredor),
üåª [Ye Min Htut](https://github.com/ymhtut),
üåª [cwar](https://github.com/cwar),
üåª [Yuwei](https://github.com/keyfoxth),
üåª [Utkarsh Bhatt](https://github.com/utkarshbhatt12),
üåª [Duarte Mendes](https://github.com/duartemendes),
üåª [Sagir Khan](https://github.com/sagirk),
üåª [Jason Kim](https://github.com/serv),
üåª [Mitja O.](https://github.com/Max101),
üåª [Sandro Miguel Marques](https://github.com/SandroMiguel)

### Estrelas <br/>

‚≠ê [Kyle Martin](https://github.com/js-kyle)
‚≠ê [Keith Holliday](https://github.com/TheHollidayInn)

<br/><br/><br/>
